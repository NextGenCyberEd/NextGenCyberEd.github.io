<!DOCTYPE html>
<html lang="{{ page.lang | default: site.lang | default: "en" }}">

  {%- include head.html -%}

  <body>
    <div class="site-wrapper">
      <aside class="sidebar">
        <a class="site-title" href="{{ "/" | relative_url }}">{{ site.title | escape }}</a>
        
        <ul class="nav-list">
          {%- for item in site.data.navigation -%}
            <li {% if item.sublinks %}class="has-submenu"{% endif %}>
              <a href="{{ item.link | relative_url }}" {% if page.url == item.link %}class="active"{% endif %}>
                {{ item.name }}
              </a>
              
              {%- if item.sublinks -%}
                <ul class="sub-menu {% if page.url contains item.link %}open{% endif %}">
                  {%- for sublink in item.sublinks -%}
                    <li>
                      <a href="{{ sublink.link | relative_url }}" {% if page.url == sublink.link %}class="active"{% endif %}>
                        {{ sublink.name }}
                      </a>
                    </li>
                  {%- endfor -%}
                </ul>
              {%- endif -%}
            </li>
          {%- endfor -%}
        </ul>
      </aside>

      <main class="main-content" aria-label="Content">
        {{ content }}
      </main>
    </div>

    {%- include footer.html -%}

    <script>
      document.addEventListener('DOMContentLoaded', function() {
        // Toggle submenu visibility when parent is clicked
        const hasSubmenu = document.querySelectorAll('.has-submenu > a');
        hasSubmenu.forEach(function(link) {
          link.addEventListener('click', function(e) {
            if (this.getAttribute('href') === '#' || this.getAttribute('href') === '') {
              e.preventDefault();
            }
            const submenu = this.nextElementSibling;
            this.classList.toggle('open');
            submenu.classList.toggle('open');
          });
        });
      });
    </script>
  </body>

</html>